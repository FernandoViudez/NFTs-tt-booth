{"version":3,"sources":["lib/metadata.ts","lib/nft.ts","MediaDisplay.tsx","Picker.tsx","Uploader.tsx","Minter.tsx","AlgorandWalletConnector.tsx","App.tsx","index.tsx","lib/ipfs.ts","lib/config.ts","lib/algorand.ts"],"names":["getTypeFromMimeType","filetype","split","type","omitRawAndEmpty","k","v","Metadata","args","_raw","undefined","name","description","image","decimals","unitName","image_integrity","image_mimetype","background_color","external_url","external_url_integrity","external_url_mimetype","animation_url","animation_url_integrity","animation_url_mimetype","extra_metadata","localization","properties","Object","assign","this","fmt","hasOwnProperty","toString","hash","sha256","create","update","Uint8Array","digest","md_blob","Blob","JSON_TYPE","File","METADATA_FILE","JSON","stringify","parse","mimeType","t","url","ARC3_URL_SUFFIX","ipfsURL","cid","resolveProtocol","activeConf","endsWith","slice","length","chunks","conf","ipfsGateway","mediaIntegrity","file","a","arrayBuffer","buff","bytes","Buffer","from","Token","id","metadataHash","total","creator","manager","reserve","clawback","freeze","defaultFrozen","p","params","index","NFT","md","token","urlMimeType","metadata","valid","mediaURL","substring","wallet","createToken","asset_id","fromAssetId","assetId","getToken","fromToken","fromParams","getMimeTypeFromIpfs","getMetaFromIpfs","MediaDisplay","props","media","controls","src","mediaSrc","alt","className","Picker","React","useState","options","setOptions","initialized","setInitialized","useEffect","listRecentFiles","activeConfig","then","opts","md_promises","opt","push","getIpfsUrlFromCID","Promise","all","arr","filtered","idx","cards","map","option","DisplayCard","cidmd","to","elevation","Elevation","TWO","Uploader","meta","setMeta","loading","setLoading","fileObj","setFileObj","setMediaSrc","setMimeType","putToIPFS","window","location","reload","console","error","alert","UploadContainer","setFile","reader","FileReader","onload","e","target","result","readAsDataURL","metaObj","size","intent","style","float","margin","onClick","large","disabled","text","onInputChange","event","stopPropagation","preventDefault","files","item","Minter","useParams","setMd","importingAccount","setImportingAccount","nft","setNFT","fundLoading","setFundLoading","popupOpen","setPopupOpen","createdId","setCreatedId","sw","addr","xferAsset","acct","algosdk","generateAccount","fundAccount","href","NFTCard","mintOnly","mintAndCreate","AccountImporter","cancelCreate","continueCreate","AddressReader","optIn","handleScanned","isOpen","DIALOG_BODY","THREE","icon","setIsOpen","mn","setMn","ic","secretKeyToMnemonic","sk","value","DIALOG_FOOTER","vref","useRef","scanner","setScanner","open","stop","start","seen","onOpened","current","QrScanner","data","width","ref","WORKER_PATH","AlgorandWalletConnector","selectorOpen","setSelectorOpen","sessionWallet","updateWallet","handleSelectedWallet","choice","currentTarget","allowedWallets","disconnect","SessionWallet","network","permissionCallback","connect","interval","connected","success","setInterval","clearInterval","walletOptions","entries","fill","minimal","outlined","img","darkMode","displayName","rightIcon","title","onClose","Classes","addr_list","accts","substr","onChange","setAccountIndex","parseInt","iconProps","defaultValue","accountIndex","App","sessionGetActiveConf","setSessionWallet","accountList","setAccounts","setConnected","Group","align","Alignment","LEFT","Heading","Divider","RIGHT","exact","path","children","history","createBrowserHistory","ReactDOM","render","StrictMode","document","getElementById","storageClient","getStorageClient","Web3Storage","endpoint","storage","put","wrapWithDirectory","mediaAdded","integ","mdc","mediaType","mdobj","toFile","ms_threshold","w3s","list","maxResults","upload","req","Request","method","fetch","resp","headers","get","blob","body","parsed","require","activeConfKey","ac","sessionStorage","getItem","getClient","Algodv2","algod","getDefaultAccount","getSuggested","suggested","create_txn","makeAssetCreateTxnWithSuggestedParamsFromObject","assetName","assetURL","assetMetadataHash","toHash","suggestedParams","signTxn","create_txn_s","sendWait","fund_txn","makePaymentTxnWithSuggestedParamsFromObject","amount","optin_txn","makeAssetTransferTxnWithSuggestedParamsFromObject","assetIndex","xfer_txn","grouped","assignGroupID","fund_txn_s","xfer_txn_s","optin_txn_s","signTransaction","rx","rounds","getTransactionParams","do","txParams","lastRound","getAssetByID","signed","client","sendRawTransaction","txId","waitForConfirmation"],"mappings":"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","file":"static/js/main.f7f8f2d9.chunk.js","sourcesContent":["import {Token, JSON_TYPE, METADATA_FILE} from './nft'\nimport { sha256 } from 'js-sha256'\n\nexport type Properties = {\n    [key: string]: string | number\n}\n\nexport type LocalizationIntegrity = {\n    [key: string]: string \n}\n\nexport type Localization = {\n    uri: string \n    default: string \n    locales: string[] \n    integrity?: LocalizationIntegrity\n}\n\n// Just takes the first chunk of the mimetype (the type)\nexport function getTypeFromMimeType(filetype: string): string {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const [type, _] = filetype.split(\"/\")\n    return type\n}\n\nfunction omitRawAndEmpty(k,v){\n    if(k === \"_raw\") return undefined;\n    if(v === \"\") return undefined;\n    return v\n}\n\nexport class Metadata {\n    _raw: string = undefined\n\n    name: string = \"\"\n    description: string = \"\"\n\n    image: string = \"\"\n    decimals?: number = 0\n    unitName?: string = \"\"\n    image_integrity?: string = \"\"\n    image_mimetype?: string = \"\"\n\n    background_color?: string = \"\"\n    external_url?: string = \"\"\n    external_url_integrity?: string = \"\"\n    external_url_mimetype?: string = \"\"\n\n    animation_url?: string = \"\"\n    animation_url_integrity?: string = \"\"\n    animation_url_mimetype?: string = \"\"\n\n    extra_metadata?: string = \"\"\n\n    localization?: Localization\n\n    properties?: Properties\n\n    constructor(args: any = {}) { Object.assign(this, args) }\n\n    toHash(fmt: Boolean = false): Uint8Array {\n        if(this.hasOwnProperty(\"extra_metadata\")){\n            //TODO\n            //am = SHA-512/256(\"arc0003/am\" || SHA-512/256(\"arc0003/amj\" || content of JSON metadata file) || e)\n        }\n\n        if(this._raw === undefined) \n            this._raw = this.toString(false)\n\n        const hash = sha256.create();\n        fmt ? hash.update(this.toString(false)):hash.update(this._raw);\n        return new Uint8Array(hash.digest())\n    }\n\n    valid(): boolean {\n        return this.image !== \"\"\n    }\n\n    toFile(): File {\n        const md_blob = new Blob([this.toString()], { type: JSON_TYPE })\n        return new File([md_blob], METADATA_FILE)\n    }\n\n    toString(fmt: Boolean = false): string {\n        if(this._raw === undefined) this._raw = JSON.stringify({...this}, omitRawAndEmpty)\n        return JSON.stringify(JSON.parse(this._raw) , omitRawAndEmpty, fmt?2:0)\n    }\n\n\n    mimeType(): string {\n        if(this.animation_url !== \"\") return this.animation_url_mimetype;\n        if(this.external_url_mimetype !== \"\") return this.external_url_mimetype;\n        return this.image_mimetype\n    }\n\n    mediaType(): string {\n        return getTypeFromMimeType(this.mimeType())\n    }\n\n    mediaURL(): string {\n        if(this.animation_url !== \"\") {\n            return this.animation_url\n        }\n        return this.image\n    }\n\n\n    static fromToken(t: Token){\n        return new Metadata({name:t.name, image: t.url, decimals: t.decimals })\n    }\n}\n","import { createToken, getToken } from \"./algorand\";\nimport { getMimeTypeFromIpfs, getMetaFromIpfs } from \"./ipfs\";\nimport { sha256 } from \"js-sha256\";\nimport { Wallet } from \"algorand-session-wallet\";\nimport { conf } from \"./config\";\nimport { Metadata } from \"./metadata\";\n\n/*\n\nThe following is a class and metadata type to support the ARC-0003 standard \nset forth by the Algorand Foundation and Community\n\nhttps://github.com/algorandfoundation/ARCs/blob/main/ARCs/arc-0003.md\n\n*/\n\nexport const ARC3_NAME_SUFFIX = \"@arc3\";\nexport const ARC3_URL_SUFFIX = \"#arc3\";\nexport const METADATA_FILE = \"metadata.json\";\nexport const JSON_TYPE = \"application/json\";\n\nexport function asaURL(cid: string): string {\n  return ipfsURL(cid) + ARC3_URL_SUFFIX;\n}\nexport function ipfsURL(cid: string): string {\n  return \"ipfs://\" + cid;\n}\nexport function fileURL(activeConf: number, cid: string, name: string): string {\n  return conf[activeConf].ipfsGateway + cid + \"/\" + name;\n}\n\nexport function resolveProtocol(activeConf: number, url: string): string {\n  if (url.endsWith(ARC3_URL_SUFFIX))\n    url = url.slice(0, url.length - ARC3_URL_SUFFIX.length);\n\n  const chunks = url.split(\"://\");\n\n  // No protocol specified, give up\n  if (chunks.length < 2) return url;\n\n  //Switch on the protocol\n  switch (chunks[0]) {\n    case \"ipfs\": //Its ipfs, use the configured gateway\n      return conf[activeConf].ipfsGateway + chunks[1];\n    case \"https\": //Its already http, just return it\n      return url;\n    // TODO: Future options may include arweave or algorand\n  }\n\n  return url;\n}\n\nexport async function mediaIntegrity(file: File): Promise<string> {\n  const buff = await file.arrayBuffer();\n  const bytes = new Uint8Array(buff);\n  const hash = new Uint8Array(sha256.digest(bytes));\n  return \"sha256-\" + Buffer.from(hash).toString(\"base64\");\n}\n\nexport class Token {\n  id: number;\n\n  name: string;\n  unitName: string;\n  url: string;\n\n  metadataHash: string;\n\n  total: number;\n  decimals: number;\n\n  creator: string;\n\n  manager: string;\n  reserve: string;\n  clawback: string;\n  freeze: string;\n\n  defaultFrozen: boolean;\n\n  constructor(t: any) {\n    this.id = t.id || 0;\n    this.name = t.name || \"\";\n    this.unitName = t.unitName || \"\";\n    this.url = t.url || \"\";\n\n    this.metadataHash = t.metadataHash || \"\";\n\n    this.total = t.total || 0;\n    this.decimals = t.decimals || 0;\n\n    this.creator = t.creator || \"\";\n\n    this.manager = t.manager || \"\";\n    this.reserve = t.reserve || \"\";\n    this.clawback = t.clawback || \"\";\n    this.freeze = t.freeze || \"\";\n\n    this.defaultFrozen = t.defaultFrozen || false;\n  }\n\n  static fromParams(t: any): Token {\n    const p = t.params;\n    return new Token({\n      id: t.index,\n      name: p.name || \"\",\n      unitName: p[\"unit-name\"] || \"\",\n      url: p.url || \"\",\n      metadataHash: p[\"metadata-hash\"] || \"\",\n      total: p.total || 0,\n      decimals: p.decimals || 0,\n      creator: p.creator || \"\",\n      manager: p.manager || \"\",\n      reserve: p.reserve || \"\",\n      clawback: p.clawback || \"\",\n      freeze: p.freeze || \"\",\n      defaultFrozen: p[\"default-frozen\"] || false,\n    }) as Token;\n  }\n\n  valid(): boolean {\n    return this.id > 0 && this.total > 0 && this.url !== \"\";\n  }\n}\n\nexport class NFT {\n  token: Token = new Token({});\n  metadata: Metadata = new Metadata();\n\n  urlMimeType: string;\n\n  constructor(md: Metadata, token?: Token, urlMimeType?: string) {\n    this.metadata = md;\n    this.token = token;\n    this.urlMimeType = urlMimeType;\n  }\n\n  static async create(\n    wallet: Wallet,\n    activeConf: number,\n    md: Metadata,\n    cid: string\n  ): Promise<NFT> {\n    const asset_id = await createToken(wallet, activeConf, ipfsURL(cid), md);\n    return await NFT.fromAssetId(activeConf, asset_id);\n  }\n\n  static async fromAssetId(activeConf: number, assetId: number): Promise<NFT> {\n    return NFT.fromToken(activeConf, await getToken(activeConf, assetId));\n  }\n\n  static async fromToken(activeConf: number, t: any): Promise<NFT> {\n    const token = Token.fromParams(t);\n    const url = resolveProtocol(activeConf, token.url);\n\n    //TODO: provide getters for other storage options\n    // arweave? note field?\n\n    try {\n      const urlMimeType = await getMimeTypeFromIpfs(url);\n\n      switch (urlMimeType) {\n        case JSON_TYPE:\n          return new NFT(await getMetaFromIpfs(url), token, urlMimeType);\n      }\n\n      return new NFT(Metadata.fromToken(token), token, urlMimeType);\n    } catch (error) {\n      return new NFT(new Metadata(), token);\n    }\n  }\n\n  valid(): boolean {\n    return this.token.valid() && this.metadata.valid();\n  }\n\n  name(): string {\n    if (this.metadata.valid()) {\n      return this.metadata.name;\n    }\n    if (this.token.valid()) {\n      return this.token.name;\n    }\n    return \"\";\n  }\n\n  id(): number {\n    return this.token.valid() ? this.token.id : 0;\n  }\n\n  mediaURL(activeConf: number): string {\n    if (!this.valid()) return \"https://dummyimage.com/640x360/fff/aaa\";\n\n    // Try to resolve the protocol, if one is set\n    const url = resolveProtocol(activeConf, this.metadata.mediaURL());\n\n    // If the url is different, we resolved it correctly\n    if (url !== this.metadata.mediaURL()) return url;\n\n    // It may be a relative url stored within the same directory as the metadata file\n    // Lop off the METADATA_FILE bit and append image path\n    if (this.token.url.endsWith(METADATA_FILE)) {\n      const dir = this.token.url.substring(\n        0,\n        this.token.url.length - METADATA_FILE.length\n      );\n      return resolveProtocol(activeConf, dir) + this.metadata.mediaURL();\n    }\n\n    // give up\n    return url;\n  }\n}\n","import { getTypeFromMimeType } from \"./lib/metadata\"\n\ntype MediaDisplayProps = {\n    mimeType: string\n    mediaSrc: string | undefined\n}\n\nexport function MediaDisplay(props: MediaDisplayProps){\n    const type = getTypeFromMimeType(props.mimeType)\n\n    let media = <div></div>\n    switch(type) {\n        case \"audio\":\n           media = (\n                <audio id=\"uploaded-media\" controls >\n                    <source src={props.mediaSrc} type={props.mimeType} />\n                </audio>\n            )\n            break;\n        case \"video\":\n            media = (\n                <video id=\"uploaded-media\" controls>\n                    <source src={props.mediaSrc} type={props.mimeType} />\n                </video>\n            )\n            break;\n        default:\n            media = (\n                <img id=\"uploaded-media\" alt=\"NFT\" src={props.mediaSrc} />\n            )\n    }\n\n    return (\n        <div className='media-display content' >\n            {media}\n        </div>\n    )\n}","import { Card, Elevation } from \"@blueprintjs/core\";\n\nimport {Link} from 'react-router-dom'\nimport React from \"react\";\nimport { Metadata } from \"./lib/metadata\";\nimport { resolveProtocol } from \"./lib/nft\";\nimport {\n  getIpfsUrlFromCID,\n  getMetaFromIpfs,\n  listRecentFiles,\n} from \"./lib/ipfs\";\nimport { SessionWallet } from \"algorand-session-wallet\";\nimport { MediaDisplay } from \"./MediaDisplay\";\n\ntype PickerProps = {\n  activeConfig: number;\n  sw: SessionWallet\n};\n\n// 2 hours\nconst MAX_DELTA = 60 * 60 * 4 * 1000;\n\n\nexport default function Picker(props: PickerProps) {\n  const [options, setOptions] = React.useState([]);\n  const [initialized, setInitialized] = React.useState(false);\n\n  // Look at recent\n  React.useEffect(() => {\n    if (initialized) return;\n\n    listRecentFiles(props.activeConfig, MAX_DELTA).then((opts) => {\n      const md_promises = [];\n      for (const opt of opts) {\n        //const opt = opts[idx];\n        md_promises.push(\n          getMetaFromIpfs(getIpfsUrlFromCID(props.activeConfig, opt.cid))\n        );\n      }\n\n      Promise.all(md_promises).then((arr) => {\n        const filtered = [];\n        for (const idx in arr) {\n          if (arr[idx].name !== \"\") filtered.push({\n              cid: opts[idx].cid,\n              md: arr[idx]\n            } as CIDMD);\n        }\n        setOptions(filtered);\n      });\n    });\n    setInitialized(true);\n  }, [props.activeConfig, initialized]);\n\n  const cards = options.map((option) => {\n    return <DisplayCard key={option.cid} cidmd={option} />;\n  });\n\n  return (\n    <div className=\"container\">\n      <div className=\"content content-collection\">{cards}</div>\n    </div>\n  );\n}\n\ntype CIDMD = {\n    cid: string\n    md: Metadata\n}\n\ntype DisplayCardProps = {\n  cidmd: CIDMD;\n};\n\nfunction DisplayCard(props: DisplayCardProps) {\n  return (\n\n    <Link to={'/mint/'+props.cidmd.cid}>\n      <Card\n        className=\"content-collection-item\"\n        elevation={Elevation.TWO}\n      >\n              <MediaDisplay \n                mediaSrc={resolveProtocol(0,props.cidmd.md.mediaURL())} \n                mimeType={props.cidmd.md.mimeType()} \n                />\n      </Card>\n    </Link>\n  );\n}\n","import React from 'react'\nimport { Button, Elevation, FileInput, Card} from \"@blueprintjs/core\"\nimport { getTypeFromMimeType, Metadata} from './lib/metadata'\nimport { putToIPFS } from './lib/ipfs'\nimport { MediaDisplay } from './MediaDisplay'\n\ntype UploaderProps = {\n    activeConfig: number\n}\n\nexport function Uploader(props: UploaderProps) {\n\n    const [meta, setMeta]               = React.useState(new Metadata())\n    const [loading, setLoading]         = React.useState(false)\n    const [fileObj, setFileObj]         = React.useState<File>();\n    const [mediaSrc, setMediaSrc]           = React.useState<string>();\n    const [mimeType, setMimeType]           = React.useState<string>();\n\n    function setFile(file: File) {\n        setFileObj(file)\n\n        const reader = new FileReader();\n        reader.onload = (e: any) => {  setMediaSrc(e.target.result) }\n        reader.readAsDataURL(file);\n\n        setMimeType(file.type)\n\n        setMeta((meta)=>{\n            const metaObj = {\n                ...meta,\n                properties:{...meta.properties, size:file.size}\n            }\n\n            const mediaType = getTypeFromMimeType(file.type)\n            switch(mediaType){\n                case 'audio':\n                    metaObj.animation_url = file.name\n                    metaObj.animation_url_mimetype = file.type\n                    break;\n                case 'video':\n                    metaObj.animation_url = file.name\n                    metaObj.animation_url_mimetype = file.type\n                    break;\n                case 'image':\n                    metaObj.image = file.name\n                    metaObj.image_mimetype = file.type\n                    break;\n            }\n\n            return new Metadata(metaObj)\n        })\n    }\n\n\n    async function uploadMedia() {\n        setLoading(true) \n\n        const md = new Metadata({\n            ...meta,\n            name: \"ETH Denver AlgoRanch NFT\",\n            unitName:\"eth-denv\",\n            description:\"NFT Minted ETH Denver 2022\",\n            decimals: 0,\n        }) \n\n        setMeta(md)\n\n        try {\n            await putToIPFS(props.activeConfig, fileObj, md)\n            setLoading(false)\n            window.location.reload()\n        } catch (error) {\n            console.error(error)\n            alert(\"Failed to upload image to ipfs :(\")\n            setLoading(false)\n            return\n        }\n    }\n\n    return (\n        <div className='container'>\n            <Card elevation={Elevation.TWO} className='mint-card' >\n                <UploadContainer mimeType={mimeType} mediaSrc={mediaSrc} setFile={setFile} {...meta} />\n                <Button intent='success' style={{float:'right', margin:\"15px\"}} loading={loading} onClick={uploadMedia}>Upload</Button>\n            </Card>\n        </div>\n    )\n\n}\n\ntype UploaderContainerProps = {\n    mediaSrc: string | undefined\n    mimeType: string | undefined\n    setFile(f: File): void\n};\n\nfunction UploadContainer(props: UploaderContainerProps) {\n    function captureFile(event: any) {\n        event.stopPropagation()\n        event.preventDefault()\n        props.setFile(event.target.files.item(0))\n    }\n\n    if (props.mediaSrc === undefined || props.mediaSrc === \"\" ) return (\n        <div className='container'>\n            <div className='content content-piece' >\n                <FileInput large={true} disabled={false} text=\"Choose file...\" onInputChange={captureFile} />\n            </div>\n        </div>\n    )\n\n    return (\n        <div className='container' >\n            <div className='content content-piece'>\n                <MediaDisplay mimeType={props.mimeType} mediaSrc={props.mediaSrc} />\n            </div>\n        </div>\n    )\n}","import { SessionWallet } from 'algorand-session-wallet'\nimport QrScanner from \"qr-scanner\";\nimport {useParams} from 'react-router-dom'\nimport React from 'react'\nimport { NFT, resolveProtocol} from './lib/nft'\nimport { Metadata } from './lib/metadata'\nimport { getIpfsUrlFromCID, getMetaFromIpfs } from './lib/ipfs'\nimport {fundAccount, xferAsset} from './lib/algorand'\nimport { Button, Card, Dialog, Elevation } from '@blueprintjs/core'\nimport QRCode from \"react-qr-code\";\nimport algosdk, {secretKeyToMnemonic } from 'algosdk'\nimport { DIALOG_BODY, DIALOG_FOOTER } from '@blueprintjs/core/lib/esm/common/classes'\nimport { MediaDisplay } from './MediaDisplay';\n\nQrScanner.WORKER_PATH = \"/qr-scanner-worker.min.js\"\n\nexport type MinterProps = {\n    activeConfig: number \n    sw: SessionWallet\n}\n\nexport function Minter(props: MinterProps){\n    // Mint the chosen nft image with our minting account\n    const {cid} = useParams()\n    const [md, setMd] = React.useState(new Metadata({}))\n    const [importingAccount, setImportingAccount] = React.useState(undefined)\n    const [nft, setNFT] = React.useState(undefined)\n    const [fundLoading, setFundLoading] = React.useState(false)\n    const [loading, setLoading] = React.useState(false)\n    const [popupOpen,setPopupOpen] = React.useState(false)\n\n    const [createdId, setCreatedId] = React.useState(0)\n\n    React.useEffect(()=>{\n        if(md._raw === undefined)\n            getMetaFromIpfs(getIpfsUrlFromCID(props.activeConfig, cid)).then((md)=>{\n                setMd(md)\n            })\n    }, [props.activeConfig, cid, md])\n\n    async function mintOnly(){\n        // Create ASA with our user\n        setLoading(true)\n        const result = await NFT.create(props.sw.wallet, props.activeConfig,  md, cid)\n        setNFT(result)\n        setCreatedId(result.id())\n    }\n\n    async function handleScannedAccount(addr: string){\n        // Fires after successful scan of addr\n        await xferAsset(props.sw.wallet, props.activeConfig, addr, createdId)\n\n        setCreatedId(0)\n        setLoading(false)\n    }\n\n    async function mintAndCreate(){\n        // Create account\n        setLoading(true)\n        const acct = algosdk.generateAccount()\n        setImportingAccount(acct)\n    }\n\n    function cancelCreate() { \n        setLoading(false)\n        setImportingAccount(undefined) \n    }\n\n    async function continueCreate() {\n        // Create ASA\n        const result = await NFT.create(props.sw.wallet, props.activeConfig,  md, cid)\n        setNFT(result)\n        setPopupOpen(true)\n    }\n\n    async function fundIt(){\n        // User has scanned it, issue grouped transactions\n        setFundLoading(true)\n        \n        await fundAccount(props.sw.wallet, props.activeConfig, importingAccount, nft.id())\n        // Unset\n        setImportingAccount(undefined)\n        setFundLoading(false)\n        setLoading(false)\n        window.location.href=\"/NFTBooth\"\n    }\n\n    return (\n        <div className='container'>\n            <NFTCard loading={loading} cid={cid} md={md} mintOnly={mintOnly} mintAndCreate={mintAndCreate}></NFTCard>\n            <AccountImporter importingAccount={importingAccount} cancelCreate={cancelCreate} continueCreate={continueCreate}/>\n            <AddressReader  optIn={createdId} handleScanned={handleScannedAccount}></AddressReader>\n            <Dialog isOpen={popupOpen} >\n                <div className={DIALOG_BODY}>\n                    <div className='container'>\n                        <Button loading={fundLoading} intent='success' onClick={fundIt}>Fund it!</Button>\n                    </div>\n                </div>\n            </Dialog>\n        </div>\n    )\n}\n\ninterface NFTCardProps {\n    cid: string\n    md: Metadata\n    loading: boolean\n    mintOnly()\n    mintAndCreate()\n}\n\nfunction NFTCard(props: NFTCardProps) {\n    return (\n        <Card elevation={Elevation.THREE} >\n            <MediaDisplay mediaSrc={resolveProtocol(0, props.md.mediaURL())} mimeType={props.md.mimeType()} />\n            <div className='container'>\n                <Button loading={props.loading} icon='clean' intent='success' onClick={props.mintAndCreate}>Mint</Button>\n            </div>\n        </Card>\n    )\n}\n\ninterface AccountImporterProps {\n    importingAccount: algosdk.Account \n    continueCreate()\n    cancelCreate()\n}\n\nfunction AccountImporter(props: AccountImporterProps) {\n    const [isOpen, setIsOpen] = React.useState(false)\n    const [mn, setMn]  = React.useState(\"\")\n\n    const ic = props.importingAccount\n    React.useEffect(()=>{\n        if(ic !== undefined){\n            setMn(JSON.stringify({\n                \"version\":\"1.0\", \n                \"mnemonic\":secretKeyToMnemonic(ic.sk)\n            }))\n            setIsOpen(true)\n        }\n    }, [ic])\n\n    function cancelCreate(){\n        setIsOpen(false)\n        props.cancelCreate()\n    }\n    function continueCreate(){\n        setIsOpen(false)\n        props.continueCreate()\n    }\n\n    return (\n        <Dialog isOpen={isOpen} className='content' >\n            <div className={DIALOG_BODY} >\n                <QRCode  value={mn} />\n            </div>\n            <div className={DIALOG_FOOTER} >\n                <div className='container'>\n                    <Button style={{margin:\"0px 10px\"}} intent='danger' onClick={cancelCreate}>Cancel</Button>\n                    <Button style={{margin:\"0px 10px\"}} intent='success' onClick={continueCreate}>Ready!</Button>\n                </div>\n            </div>\n        </Dialog>\n    )\n}\n\nexport interface AddressReaderProps {\n    optIn: number \n    handleScanned(addr: string): void\n}\n\nexport function AddressReader(props: AddressReaderProps) {\n    const vref = React.useRef<HTMLVideoElement>(null)\n    const [scanner, setScanner] = React.useState<QrScanner | undefined>(undefined)\n    const [isOpen, setIsOpen] = React.useState(false)\n\n    const open = props.optIn !== undefined && props.optIn>0\n    React.useEffect(()=>{\n        setIsOpen(open)\n        scanner?.stop()\n        scanner?.start()\n    }, [scanner, open])\n\n    let seen = \"\"\n    function initCam(){\n        function handleScanned(data: string){\n            if(seen === data) return\n\n            scanner?.stop()\n            vref.current = null\n            setScanner(undefined)\n            setIsOpen(false)\n            seen = data\n            props.handleScanned(data)\n        }\n\n        if(vref.current !== null && scanner === undefined)\n           setScanner(new QrScanner(vref.current,handleScanned))\n    }\n\n    return (\n        <Dialog isOpen={isOpen} onOpened={initCam}>\n            <div className={DIALOG_BODY}>\n                <h3>Please Opt into Asset ID {props.optIn}</h3>\n                <div className='scanner-container'>\n                    <video style={{width: '100%'}} ref={vref}></video>\n                </div>\n            </div>\n        </Dialog>\n    )\n}","import * as React from 'react'\n\nimport { SessionWallet, allowedWallets } from 'algorand-session-wallet'\n\nimport { Dialog, Button, Classes, HTMLSelect, Intent } from '@blueprintjs/core'\nimport { IconName } from '@blueprintjs/icons'\n\n\ntype AlgorandWalletConnectorProps = {\n    darkMode: boolean\n    connected: boolean\n    accts: string[]\n    sessionWallet: SessionWallet\n    updateWallet(sw: SessionWallet): void\n}\n\nexport default function AlgorandWalletConnector(props:AlgorandWalletConnectorProps)  {\n\n    const [selectorOpen, setSelectorOpen] = React.useState(false)\n\n    const {sessionWallet,updateWallet} = props\n    React.useEffect(()=>{\n        if(sessionWallet.connected()) return\n\n        let interval: any\n        sessionWallet.connect().then((success)=>{\n            if(!success) return\n\n            // Check every 500ms to see if we've connected then kill the interval\n            // This is most useful in the case of walletconnect where it may be several \n            // seconds before the user connects\n            interval = setInterval(()=>{\n                if(sessionWallet.connected()) {\n                    clearInterval(interval)\n                    updateWallet(sessionWallet)\n                }\n            }, 500)\n\n        })\n\n        return ()=>{ clearInterval(interval) }\n\n    }, [sessionWallet, updateWallet])\n\n\n    function disconnectWallet() { \n        props.sessionWallet.disconnect()\n        props.updateWallet(new SessionWallet(props.sessionWallet.network, props.sessionWallet.permissionCallback)) \n    }\n\n    function handleDisplayWalletSelection() { setSelectorOpen(true) }\n\n    async function handleSelectedWallet(e: any) {\n        const choice = e.currentTarget.id\n\n        if(!(choice in allowedWallets)) {\n            if(props.sessionWallet.wallet !== undefined) props.sessionWallet.disconnect()\n            return setSelectorOpen(false)\n        }\n\n        const sw = new SessionWallet(props.sessionWallet.network, props.sessionWallet.permissionCallback, choice)\n\n        if(!await sw.connect()) {\n            sw.disconnect()\n        }\n\n        props.updateWallet(sw)\n\n        setSelectorOpen(false)\n    }\n\n    function handleChangeAccount(e: any) {\n        props.sessionWallet.setAccountIndex(parseInt(e.target.value))\n        props.updateWallet(props.sessionWallet)\n    }\n\n    const walletOptions = []\n    for(const [k,v] of Object.entries(allowedWallets)){\n        walletOptions.push((\n        <li key={k}>\n            <Button id={k}\n                large={true} \n                fill={true} \n                minimal={true} \n                outlined={true} \n                onClick={handleSelectedWallet}\n                > \n                <div className='wallet-option'>\n                    <img alt='wallet-branding' className='wallet-branding' src={  v.img(props.darkMode)} />\n                    <h5>{v.displayName()}</h5>\n                </div>\n                </Button>\n        </li>\n        ))\n    }\n\n    if (!props.connected) return (\n        <div>\n            <Button\n                minimal={true}\n                rightIcon='selection'\n                intent='warning'\n                outlined={true}\n                onClick={handleDisplayWalletSelection}>Connect Wallet</Button>\n\n            <Dialog isOpen={selectorOpen} title='Select Wallet' onClose={handleSelectedWallet} >\n                <div className={Classes.DIALOG_BODY}>\n                    <ul className='wallet-option-list'>\n                        {walletOptions}\n                    </ul>\n                </div>\n            </Dialog>\n        </div>\n    )\n\n\n    const addr_list = props.accts.map((addr, idx) => {\n        return (<option value={idx} key={idx}> {addr.substr(0, 8)}...  </option>)\n    })\n\n    const iconprops = { \n        icon: 'symbol-circle' as IconName, \n        intent: 'success'  as Intent\n    }\n\n    return (\n        <div>\n            <HTMLSelect \n                onChange={handleChangeAccount} \n                minimal={true} \n                iconProps={iconprops} \n                defaultValue={props.sessionWallet.accountIndex()} >\n                {addr_list}\n            </HTMLSelect>\n            <Button icon='log-out' minimal={true} onClick={disconnectWallet} ></Button>\n        </div>\n    )\n}","import Picker from './Picker'\nimport './index.css';\nimport { Button, Alignment, Navbar } from '@blueprintjs/core';\nimport { SessionWallet } from 'algorand-session-wallet';\nimport {Uploader} from './Uploader'\nimport React from 'react';\nimport {Minter} from './Minter';\nimport AlgorandWalletConnector from './AlgorandWalletConnector'\nimport { conf, sessionGetActiveConf } from './lib/config';\n\nimport {\n  HashRouter as Router,\n  Link,\n  Switch,\n  Route,\n} from 'react-router-dom'\n\n\ntype AppProps = {\n  history: History,\n}\n\nfunction App(props: AppProps) {\n\n  const activeConf = sessionGetActiveConf()\n\n  const sw = new SessionWallet(conf[activeConf].network)\n\n\n  const [sessionWallet, setSessionWallet] =  React.useState(sw)\n  const [accts, setAccounts] = React.useState(sw.accountList())\n  const [connected, setConnected] = React.useState(sw.connected())\n\n  function updateWallet(sw: SessionWallet){ \n    setSessionWallet(sw)\n    setAccounts(sw.accountList())\n    setConnected(sw.connected())\n  }\n\n  return (\n    <Router >\n      <div className=\"App\">\n        <Navbar>\n        <Navbar.Group align={Alignment.LEFT}>\n          <Navbar.Heading>Algorand NFT Minter</Navbar.Heading>\n          <Navbar.Divider />\n          <Link to='/'><Button minimal={true} icon='search'>Choose</Button></Link>\n          <Link to='/upload'><Button minimal={true} icon='upload'>Upload</Button></Link>\n        </Navbar.Group>\n        <Navbar.Group  align={Alignment.RIGHT}>\n          <AlgorandWalletConnector  \n            darkMode={false}\n            sessionWallet={sessionWallet}\n            accts={accts}\n            connected={connected} \n            updateWallet={updateWallet}\n          />\n\n        </Navbar.Group>\n        </Navbar>\n        <Switch>\n          <Route exact path=\"/\" children={<Picker  activeConfig={activeConf} sw={sessionWallet}></Picker>} />\n          <Route path=\"/mint/:cid\" children={ <Minter  activeConfig={activeConf} sw={sessionWallet}></Minter> }/>\n          <Route exact path=\"/upload\" children={ <Uploader  activeConfig={activeConf} ></Uploader> }/>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\n\nimport {createBrowserHistory} from \"history\"\n\nconst history = createBrowserHistory();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App history={history}  />\n  </React.StrictMode>,\n  document.getElementById('root')\n);","import { ipfsURL, mediaIntegrity } from './nft'\nimport {Metadata} from './metadata'\nimport {conf} from './config'\n\n/*\n Currently an issue with resolving ipfs-car module in web3.storage when using react-scripts\n We just use the prebuilt one but with no types we have to just ignore the issue for now\n//import { Web3Storage } from 'web3.storage'\n*/\n// @ts-ignore\nimport { Web3Storage } from 'web3.storage/dist/bundle.esm.min.js'\n\n\nlet storageClient = undefined\nfunction getStorageClient(activeConf: number): Web3Storage {\n    if(storageClient === undefined){\n        storageClient = new Web3Storage({ token: \" \", endpoint:\"https://worker.barnji.workers.dev\" })\n    }\n    return storageClient\n}\n\nexport async function putToIPFS(activeConf: number, file: File, md: Metadata): Promise<string> {\n    const storage = getStorageClient(activeConf) \n    const mediaAdded = await storage.put([file], {wrapWithDirectory: false})\n\n    const integ = await mediaIntegrity(file)\n\n    const mdc = {...md}\n    switch(md.mediaType()){\n        case 'image':\n            mdc.image = ipfsURL(mediaAdded)\n            mdc.image_integrity = integ\n            break\n        case 'audio':\n            mdc.animation_url = ipfsURL(mediaAdded)\n            mdc.animation_url_integrity = integ\n            break\n        case 'video':\n            mdc.animation_url = ipfsURL(mediaAdded)\n            mdc.animation_url_integrity = integ\n            break\n    }\n\n    const mdobj = new Metadata(mdc)\n\n    return await storage.put([mdobj.toFile()], {wrapWithDirectory: false})\n}\n\nexport async function listRecentFiles( activeConf: number, ms_threshold: number): Promise<any[]> {\n    const w3s = getStorageClient(activeConf)\n    const options = []\n    for await (const upload of w3s.list({maxResults:10})) {\n        options.push(upload)\n    }\n    return options\n}\n\nexport function getIpfsUrlFromCID(activeConf:number, cid: string): string {\n    return conf[activeConf].ipfsGateway + cid\n}\n\nexport async function getMimeTypeFromIpfs(url: string): Promise<string> {\n    const req = new Request(url, { method:\"HEAD\" })\n    const resp = await fetch(req)\n    return resp.headers.get(\"Content-Type\")\n}\n\n\nexport async function getMetaFromIpfs(url: string): Promise<Metadata> {\n    try {\n        const req = new Request(url)\n        const resp = await fetch(req)\n        const body = await resp.blob()\n        const text = await body.text()\n        const parsed = JSON.parse(text)\n        return new Metadata({\"_raw\":text, ...parsed}) \n    } catch (e){\n        console.error(e)\n    }\n\n    return new Metadata({})\n}","type Config = {\n    network: string;       // The network to use for creating nfts\n    storageToken: string;  // The token provided by web3.storage\n    ipfsGateway: string;   // The IPFS gateway url for retrieving files\n    algod: string          // The Algod api url to use\n    blockExplorer: string; // The Block Explorer to allow linking out to\n}\n\nexport const conf = require(\"../config.json\") as Config[];\n\nexport function getAddrUrl(idx: number, addr: string): string {\n    return conf[idx].blockExplorer + \"address/\" + addr\n}\nexport function getAsaUrl(idx: number, id: number): string {\n    return conf[idx].blockExplorer + \"asset/\" + id \n}\n\nconst activeConfKey = \"active-conf\"\nexport function sessionGetActiveConf(): number {\n    const ac = sessionStorage.getItem(activeConfKey)\n    if(ac === undefined || ac === null) return 0\n    return parseInt(ac)\n}\n\nexport function sessionSetActiveConf(ac: number)  {\n    sessionStorage.setItem(activeConfKey, ac.toString())\n}\n","import { Wallet } from \"algorand-session-wallet\";\nimport algosdk, {\n  Algodv2,\n  waitForConfirmation,\n  makeAssetCreateTxnWithSuggestedParamsFromObject,\n  makeAssetTransferTxnWithSuggestedParamsFromObject,\n  makePaymentTxnWithSuggestedParamsFromObject,\n} from \"algosdk\";\nimport { NFT } from \"./nft\";\nimport { Metadata } from \"./metadata\";\nimport { conf } from \"./config\";\n\nfunction getClient(activeConf: number): Algodv2 {\n  return new algosdk.Algodv2(\"\", conf[activeConf].algod, \"\");\n}\n\nexport async function createToken(\n  wallet: Wallet,\n  activeConf: number,\n  url: string,\n  md: Metadata\n): Promise<number> {\n  const addr = wallet.getDefaultAccount();\n  const suggested = await getSuggested(activeConf, 1000);\n\n  const create_txn = makeAssetCreateTxnWithSuggestedParamsFromObject({\n    from: addr,\n    assetName: md.name,\n    unitName: md.unitName,\n    assetURL: url,\n    assetMetadataHash: md.toHash(),\n    manager: addr,\n    total: 1,\n    decimals: 0,\n    defaultFrozen: false,\n    suggestedParams: suggested,\n  });\n\n  const [create_txn_s]  = await wallet.signTxn([create_txn])\n  const result = await sendWait(activeConf, [create_txn_s])\n  return result['asset-index']\n}\n\nexport async function fundAccount(\n  wallet: Wallet,\n  activeConf: number,\n  acct: algosdk.Account,\n  id: number\n) {\n  const addr = wallet.getDefaultAccount();\n  const suggested = await getSuggested(activeConf, 100);\n\n  const fund_txn = makePaymentTxnWithSuggestedParamsFromObject({\n    from: addr,\n    to: acct.addr,\n    amount: 3e5,\n    suggestedParams: suggested,\n  });\n\n  const optin_txn = makeAssetTransferTxnWithSuggestedParamsFromObject({\n    from: acct.addr,\n    to: acct.addr,\n    assetIndex: id,\n    amount: 0,\n    suggestedParams: suggested,\n  });\n\n  const xfer_txn = makeAssetTransferTxnWithSuggestedParamsFromObject({\n    from: addr,\n    to: acct.addr,\n    assetIndex: id,\n    amount: 1,\n    suggestedParams: suggested,\n  });\n\n\n  const grouped = [fund_txn, optin_txn, xfer_txn];\n  algosdk.assignGroupID(grouped);\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [fund_txn_s, _, xfer_txn_s] = await wallet.signTxn(grouped);\n  const optin_txn_s = algosdk.signTransaction(optin_txn, acct.sk);\n  await sendWait(activeConf, [fund_txn_s, optin_txn_s, xfer_txn_s]);\n}\n\nexport async function xferAsset(\n  wallet: Wallet,\n  activeConf: number,\n  rx: string,\n  id: number\n) {\n  const addr = wallet.getDefaultAccount();\n  const suggested = await getSuggested(activeConf, 100);\n\n  const xfer_txn = makeAssetTransferTxnWithSuggestedParamsFromObject({\n    from: addr,\n    to: rx,\n    assetIndex: id,\n    amount: 1,\n    suggestedParams: suggested,\n  });\n\n  const [create_txn_s] = await wallet.signTxn([xfer_txn]);\n  await sendWait(activeConf, [create_txn_s]);\n}\n\nexport async function getSuggested(activeConf: number, rounds: number) {\n  const txParams = await getClient(activeConf).getTransactionParams().do();\n  return { ...txParams, lastRound: txParams[\"firstRound\"] + rounds };\n}\n\nexport async function getToken(\n  activeConf: number,\n  assetId: number\n): Promise<any> {\n  return await getClient(activeConf).getAssetByID(assetId).do();\n}\n\nexport async function getCollection(\n  activeConf: number,\n  address: string\n): Promise<any[]> {\n  const results = await getClient(activeConf).accountInformation(address).do();\n\n  const plist = [];\n  for (const a in results[\"assets\"]) {\n    if (results[\"assets\"][a][\"amount\"] > 0)\n      plist.push(getToken(activeConf, results[\"assets\"][a][\"asset-id\"]));\n  }\n\n  const assets = await Promise.all(plist);\n  const collectionRequests = assets.map((a) => {\n    return NFT.fromToken(activeConf, a);\n  });\n  return Promise.all(collectionRequests);\n}\n\nexport async function sendWait(\n  activeConf: number,\n  signed: any[]\n): Promise<any> {\n  const client = getClient(activeConf);\n  try {\n    const { txId } = await client\n      .sendRawTransaction( signed.map((t) => { return t.blob; }))\n      .do();\n    const result = await waitForConfirmation(client, txId, 3);\n    return result;\n  } catch (error) {\n    console.error(error);\n  }\n\n  return undefined;\n}"],"sourceRoot":""}